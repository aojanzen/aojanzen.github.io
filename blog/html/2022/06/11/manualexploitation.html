<!DOCTYPE html><!--[if lt IE 7]>      <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="description" content="Hacking how-to for beginners, learnings from CTFs, note for myself">
        <meta name="viewport" content="width=device-width">
        <title>Manual Exploitation &mdash; From Noob to Hacker</title>
            <link rel="stylesheet" href="../../../_static/normalize.css" type="text/css">
            <link rel="stylesheet" href="../../../_static/sphinx.css" type="text/css">
            <link rel="stylesheet" href="../../../_static/main.css" type="text/css">
            <link rel="stylesheet" href="../../../_static/flat.css" type="text/css">
            <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
            <link rel="stylesheet" href="../../../_static/font-awesome.min.css" type="text/css">
        <link rel="shortcut icon" href="../../../_static/tinkerer.ico" /><!-- Load modernizr and JQuery -->
        <script src="../../../_static/vendor/modernizr-2.6.2.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="../../../_static/vendor/jquery-1.8.2.min.js"><\/script>')</script>
        <script src="../../../_static/plugins.js"></script>
        <script src="../../../_static/main.js"></script>
        <link rel="search" title="Search" href="../../../search.html" /><link rel="next" title="Gaining Root with Metasploit" href="../10/gainingrootwithmetasploit.html" /><link rel="prev" title="Brute Force Attacks" href="../12/bruteforceattacks.html" /><link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.html" /><script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.7.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        SOURCELINK_SUFFIX: '.txt',
        HAS_SOURCE:  true
      };
    </script><script type="text/javascript" src="../../../_static/underscore.js"></script><script type="text/javascript" src="../../../_static/doctools.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            // Scroll to content if on small screen
            if (screen.width < 480)
            {
                $(document).scrollTop(document.getElementsByTagName("article")[0].offsetTop - 44);
            }
        });
    </script></head>
    <body role="document">
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

      <div id="container"><header role="banner">
            <hgroup>
              <h1><a href="../../../index.html">From Noob to Hacker</a></h1><h2>Things I have learned along the way</h2></hgroup>
          </header>
      <nav role="navigation">
            <ul><li class="main-nav">
                  <a href="../../../index.html">Home</a>
                </li>
              <li class="main-nav">
                  <a href="../../../pages/about.html">About</a>
                </li>
              <li class="main-nav">
                  <a href="../../../pages/ctf_writeups.html">CTF Writeups</a>
                </li>
              <li class="main-nav">
                  <a href="../../../pages/linux_and_tools.html">Linux and Tools</a>
                </li>
              <li class="main-nav">
                  <a href="../../../pages/hacking.html">Hacking and Networks</a>
                </li>
              </ul>
          </nav><div class="main-container" role="main"><div class="main wrapper body clearfix"><article><div class="timestamp postmeta">
            <span>June 11, 2022</span>
        </div>
    <div class="section" id="manual-exploitation">
<h1>Manual Exploitation</h1>
<p>After gaining root with <span class="docutils literal"><span class="pre">MetaSploit</span></span>, we will gain access to the Kioptrix
machine with manual exploitation in this video, using the vulnerability of
<span class="docutils literal"><span class="pre">mod_ssl</span></span> and an exploit called <span class="docutils literal"><span class="pre">Open*uck</span></span>.</p>
<div id="more"> </div><p>If we google for <span class="docutils literal"><span class="pre">openluck</span></span> we find a
<a class="reference external" href="https://github.com/heltonWernik/OpenLuck">GitHub repo</a> with a fixed version
of a broken exploit. We can simply follow the readme file on the GitHub page to
install the exploit on our attack machine.</p>
<p>If we just run the <span class="docutils literal"><span class="pre">Open*uck</span></span> binary with <span class="docutils literal"><span class="pre">./OpenFuck</span></span> we get an
information on the proper usage, which includes a list of all supported offset
values, from which we need to pick the right one for our target machine.
Kioptrix runs on a RedHat Linux OS with an Apache 1.3.20 webserver. Either
<span class="docutils literal"><span class="pre">0x6a</span></span> or <span class="docutils literal"><span class="pre">0x6b</span></span> must be the right memory offset for our purpose.</p>
<img alt="../../../_images/OpenLuck_1.png" src="../../../_images/OpenLuck_1.png" />
<p>Looking at the usage instructions again, we see that we need to specify the
offset, the target IP address, and – optionally – the number of connections
that shall be used to run the attack (40-50 in case of doubt). The port need not
be specified unless we want to use an SSL connection.</p>
<img alt="../../../_images/OpenLuck_2.png" src="../../../_images/OpenLuck_2.png" />
<p>TCM recommends to use the second option for the memory offset, i.e. <span class="docutils literal"><span class="pre">0x6b</span></span>,
since he believes that was the more stable one.</p>
<img alt="../../../_images/OpenLuck_3.png" src="../../../_images/OpenLuck_3.png" />
<p>If we look at the output that is displayed as the exploit runs, we can see that
the program downloads further programs from the internet using <span class="docutils literal"><span class="pre">wget</span></span>. Again,
we get a root shell within a few seconds.</p>
<p>TCM claims that <span class="docutils literal"><span class="pre">MetaSploit</span></span> is a more robust and popular option to run an
exploit. Pentesters will always use the best tool available to them. Some
certifications do not allow the use tools like <span class="docutils literal"><span class="pre">MetaSploit</span></span>, but make their
exams easier in other terms. From a practical standpoint, it is a better
preparation for real pentesting to allow these tools and rather make the hack
more difficult.</p>
<p>After we got root access, we can collect additional information about our
target, e.g. using <span class="docutils literal"><span class="pre">ifconfig</span></span>, <span class="docutils literal"><span class="pre">ip</span> <span class="pre">a</span></span>, <span class="docutils literal"><span class="pre">arp</span></span>, <span class="docutils literal"><span class="pre">route</span></span> and <span class="docutils literal"><span class="pre">sudo</span> <span class="pre">-l</span></span>,
which lists the allowed commands for the user envoking the command. We can also
look at the <span class="docutils literal"><span class="pre">/etc/passwd</span></span> and the <span class="docutils literal"><span class="pre">etc/shadow</span></span> files, which contain
information about the users on the machine (mostly internal, “real” users
starting with used ID 500 and up) and hash values of the users’ passwords,
respectively, which we can download to crack them.</p>
</div>

    <div class="postmeta">
        <div class="author">
            <span>Von Andreas Janzen</span>
        </div>
        
        
        </div><ul class="related clearfix">
            <li class="left"> &laquo; <a href="../12/bruteforceattacks.html">Brute Force Attacks</a></li>
            <li class="right"><a href="../10/gainingrootwithmetasploit.html">Gaining Root with Metasploit</a> &raquo; </li>
        </ul></article><aside class="sidebar"><section><div class="widget">
    <h1>Aktuell</h1>
    <ul><li>
            <a href="../15/credentialstuffingandpasswordspraying.html">Credential Stuffing and Password Spraying</a>
        </li><li>
            <a href="../12/bruteforceattacks.html">Brute Force Attacks</a>
        </li><li>
            <a href="#">Manual Exploitation</a>
        </li><li>
            <a href="../10/gainingrootwithmetasploit.html">Gaining Root with Metasploit</a>
        </li><li>
            <a href="../09/stagedvsnon_stagedpayloads.html">Staged vs Non-Staged Payloads</a>
        </li><li>
            <a href="../09/enumeratingssh.html">Enumerating SSH</a>
        </li><li>
            <a href="../09/scanningwithnessus.html">Scanning with Nessus</a>
        </li><li>
            <a href="../08/reverservsbindshell.html">Reverse Shell vs Bind Shell</a>
        </li><li>
            <a href="../06/researchingpotentialvulnerabilities.html">Researching Potential Vulnerabilities</a>
        </li><li>
            <a href="../05/enumeratingsmb.html">Enumerating SMB</a>
        </li></ul>
</div>
</section><section><div class="widget" id="searchbox" role="search">
    <h1><a href="#searchbox">Search</a></h1>
    <form action="../../../search.html" method="get">
        <input type="text" name="q" />
        <button type="submit"><span class="fa fa-search"></span></button>
    </form>
</div></section></aside></div> <!-- #main --></div> <!-- #main-container -->

        <div class="footer-container" role="contentinfo"><footer class="wrapper">&copy; Copyright 2022, Andreas Janzen. Powered by <a href="http://www.tinkerer.me/">Tinkerer</a> and <a href="http://sphinx.pocoo.org/">Sphinx</a>.</footer></div> <!-- footer-container -->

      </div> <!--! end of #container --><!--[if lt IE 7 ]>
          <script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
          <script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script>
        <![endif]-->
    </body>
</html>